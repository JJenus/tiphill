(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[582,542],{1045:function(t,e,s){"use strict";var n=s(0),i=s.n(n),o=s(45),c=s(30),_=s(447),a=s(23),r=s(14),l=s(4);function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){i()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p=Object(o.createNamespacedHelpers)("coupon").mapGetters;e.a={methods:{toView:function(t){var e=t,s=!Object(_.a)(this.$_bets,this.$_cf_view);if(!e||isNaN(e))return 0;switch(this.$_cf_view){case 1:e=e.toString().toEnglishView();break;case 2:s&&(e=e.toString().toAmericanView());break;case 4:e=e.toString().toHongkongView();break;case 5:s&&(e=e.toString().toIndonesianView());break;case 6:s&&(e=e.toString().toMalaysianView())}return e}},computed:d(d({},p({$_bets:c.c,$_sum:c.bb,$_coupon_type:c.r,$_additional_type:c.b,$_coupon_coef:c.p})),{},{$_is_visible_coef:function(){switch(this.$_coupon_type){case a.f.COUPON_TYPES.SINGLE:case a.f.COUPON_TYPES.EXPRESS:case a.f.COUPON_TYPES.SYSTEM:case a.f.COUPON_TYPES.CHAIN:case a.f.COUPON_TYPES.MULTIBET:case a.f.COUPON_TYPES.ANTIEXPRESS:return!0;default:return!1}},$_result_coef:function(){var t=1;switch(this.$_coupon_type){case a.f.COUPON_TYPES.SYSTEM:case a.f.COUPON_TYPES.MULTIBET:var e=1,s=[];this.$_bets.forEach((function(t){0===t.betBlock?e*=t.Coef:s[t.betBlock]?s[t.betBlock]*=t.Coef:s[t.betBlock]=t.Coef})),s.sort((function(t,e){return t-e})).slice(0,this.$_additional_type.value).forEach((function(e){t*=e})),t*=e;break;case a.f.COUPON_TYPES.CHAIN:t=0,this.$_bets.forEach((function(e){t+=e.Coef})),t-=this.$_bets.length-1;break;case a.f.COUPON_TYPES.ANTIEXPRESS:t=this.$_coupon_coef;break;default:this.$_bets.forEach((function(e){t*=e.Coef}))}return parseFloat(t)},$_cf_view:function(){return this.$store.getters["global/globalGetCoefViewId"]},$_asian_bet_sum:function(){var t=this.toView(this.$_result_coef),e=this.$_sum,s=e;return t<0&&(s=e*Math.abs(t),2===this.$_cf_view&&(s/=100)),s.toFixed(2)},$_is_need_calculate:function(){var t=-1!==[2,5,6].indexOf(this.$_cf_view),e=this.$_coupon_type===a.f.COUPON_TYPES.SINGLE,s=this.toView(this.$_result_coef)<0,n=!r.a.isRefId([l.c])||this.$_bets.some((function(t){return-1!==[17,2].indexOf(t.G)})),i=r.a.isRefId([l.I,l.c,l.ib]);return t&&e&&s&&n&&i}})}},1056:function(t,e,s){"use strict";s.d(e,"e",(function(){return n})),s.d(e,"i",(function(){return i})),s.d(e,"d",(function(){return o})),s.d(e,"f",(function(){return c})),s.d(e,"h",(function(){return _})),s.d(e,"g",(function(){return a})),s.d(e,"c",(function(){return r})),s.d(e,"j",(function(){return l})),s.d(e,"a",(function(){return u})),s.d(e,"b",(function(){return d}));var n={cashout:"cashout",insurance:"insurance",history_sell:"history_sell"},i={Default:"Cashout",CashoutLater:"CashoutLater"},o=1,c=1,_=2,a=3,r=105781,l=1e4,u="cashout",d=u+"/"},1102:function(t,e,s){"use strict";s.d(e,"d",(function(){return c})),s.d(e,"c",(function(){return _})),s.d(e,"b",(function(){return a})),s.d(e,"a",(function(){return r})),s.d(e,"e",(function(){return l}));var n=s(1056),i=s(10),o=s.n(i),c=function(t){if(!t.Success){if(t.ErrorCode===n.c)return n.f;if(!t.Value)return}return t.Value&&t.Value.waitTime?n.h:(void 0!==window.user_balance&&window.user_balance.updateBalance(t.Value.UserId,t.Value.Balance),n.g)},_=function(t,e,s){return(t-e)*s/t},a=function(t,e,s){return t-e*t/s},r=function(t){return{MaxSaleSum:t.MaxSaleSum,MinSaleSum:t.MinSaleSum,LimitSumPartSale:t.LimitSumPartSale,AvailableBetSum:t.AvailableBetSum,HasOrder:t.HasOrder}},l=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o.a.prototype.$modal.show(t,e,{name:"coupon-staff-modal",width:"100%",height:"auto",classes:"v-modal-coupon",transition:"t-cashout-modal",clickToClose:!1,root:s},{"before-open":function(){document.body.classList.add("u-ovh")},"before-close":function(){document.body.classList.remove("u-ovh")}})}},1186:function(t,e,s){"use strict";s.d(e,"h",(function(){return a})),s.d(e,"f",(function(){return r})),s.d(e,"e",(function(){return l})),s.d(e,"c",(function(){return d})),s.d(e,"b",(function(){return p})),s.d(e,"a",(function(){return f})),s.d(e,"g",(function(){return h})),s.d(e,"d",(function(){return v}));var n=s(14),i=s(217),o=n.a.betting_taxes,c=parseFloat(o.type),_=o.activate_tax_thereshold||0,a=parseFloat(o.stake_tax),r=parseFloat(o.payout_tax),l=r||a,u=function(t){return t/100},d=function(t,e){return 1!==c?0:t-e},p=function(t,e){return 1===c?t*u(r):(t-e)*u(r)},f=function(t){return 100*t/(100+a)},h=function(t,e){return Object(i.b)(t-e,2)},v=function(t){return l&&t>_}},1213:function(t,e,s){"use strict";var n=s(0),i=s.n(n),o=s(45),c=s(30),_=s(50),a=s(83);function r(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?r(Object(s),!0).forEach((function(e){i()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}e.a={computed:l(l({},Object(o.mapGetters)("coupon",{$_coupon_type:c.r,$_bets:c.c,$_sum:c.bb})),{},{$_user_ref_id:function(){return this.$store.getters[a.c+"config_user_ref_id"]||0},$_is_show_bonus:function(){return Object(_.m)(this.$_bets,this.$_coupon_type,this.$_result_coef,this.$_user_ref_id)},$_bonus_coef:function(){return Object(_.i)(this.$_result_coef,this.$_bets.length)},$_to_view_bonus_coef:function(){return this.toView(this.$_bonus_coef)},$_bonus_sum:function(){return Object(_.j)(this.$_bonus_coef,this.$_sum)}})}},1311:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var n=s(28),i={data:function(){return{is_visible:!0}},methods:{hasCoincidence:function(t){if(this.searchQuery&&t&&(t=String(t).toLowerCase()).includes(String(this.searchQuery).toLowerCase()))return t},getClassCoupon:function(t){switch(t){case 1:case 5:return"wait";case 2:return"fail";case 3:case 4:return"win";default:return""}},deleteCoupon:function(){var t=this;Object(n.e)("".concat(this.$T("office_history_delete_coupon_id")," ").concat(this.coupon_id),this.$T("office_history_delete_coupon"),{preConfirm:function(){t.$http.post("/office/historydel/",{delete:t.coupon_id}).then((function(){t.is_visible=!1})).catch((function(t){console.error(t)}))}})}}}},1312:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return c})),s.d(e,"d",(function(){return _})),s.d(e,"a",(function(){return r}));var n=s(10),i=s.n(n),o="history",c=o+"/",_={line:i.a.prototype.$T("line"),live:i.a.prototype.$T("live"),calculated:i.a.prototype.$T("Calculated"),not_calculated:i.a.prototype.$T("notCalculated"),not_calculated_all:i.a.prototype.$T("notCalculatedAll")},a={all:-1,single:0,express:1,system:2,chain:3,multi_bet:4,conditional:5,anti_express:6,lucky:7,patent:8},r={namespaced:!0,state:{selected_sort:["bet_time"],selected_main_filters:Object.keys(_),selected_bet_types:["all"],is_toto:!1,need_update_data:0,calcTime:!1},getters:{need_update_data:function(t){return t.need_update_data},history_selected_sort:function(t){return t.selected_sort},history_selected_main_filters:function(t){return t.selected_main_filters},history_selected_bet_types:function(t){return t.selected_bet_types},history_sort_type:function(t){var e=null;switch(t.selected_sort[0]){case"bet_time":e=1;break;case"bet_sum":e=2;break;case"bet_coef":e=3;break;case"bet_event":e=4}return e},history_bet_type:function(t){return t.selected_bet_types.map((function(t){return a[t]})).sort((function(t,e){return t-e}))},historyCalcTime:function(t){return t.calcTime}},mutations:{historySetNeedUpdateData:function(t){t.need_update_data++},historySetBaseFilters:function(t){t.selected_main_filters=t.is_toto?[]:Object.keys(_),t.selected_sort=["bet_time"],t.selected_bet_types=["all"],t.calcTime=!1},historySetIsToto:function(t,e){t.is_toto=e},historySetSelectedSort:function(t,e){t.selected_sort=e},historySetSelectedMainFilters:function(t,e){t.selected_main_filters=e},historySetSelectedBetTypes:function(t,e){t.selected_bet_types=e},historySetCalcTime:function(t,e){t.calcTime=e}}}},1513:function(t,e,s){"use strict";var n=s(0),i=s.n(n),o=s(14),c=s(1045),_=s(1213),a=s(990),r=s(23),l=s(30),u=s(1186),d=s(45),p=s(141),f=s(34);function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function v(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(Object(s),!0).forEach((function(e){i()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var b=Object(d.createNamespacedHelpers)("coupon").mapGetters,m={name:"WinInfo",components:{taxesInfo:function(){return s.e(542).then(s.bind(null,2070))}},mixins:[c.a,_.a,a.a],props:{sum:{type:Number,default:0},result_coef:{type:Number,default:0},grid_classes:{type:[String,Array],default:""},is_modal:{type:Boolean,default:!1}},constants:{IS_MOBILE:o.a.is_mobile,HAS_TAXES:u.e},computed:v(v({},b({$_sum:l.bb,$_additional_type:l.b,$_coupon_type:l.r})),{},{$_root_classes:function(){return{"m-coupon__win-info":this.$consts.IS_MOBILE,"grid__cell--span-bsr-6":!this.$consts.HAS_TAXES&&!this.is_modal}},$_sum_value:function(){return this.sum||this.$_sum},$_stake_with_taxes:function(){return Object(u.a)(this.$_sum_value)},$_result_coef_value:function(){return this.result_coef||this.$_result_coef},$_max_win_value:function(){var t=this.$consts.HAS_TAXES?this.$_stake_with_taxes:this.$_sum_value;if(this.$_is_show_bonus)return Number(this.$_bonus_sum);if(!this.$_is_system)return Number((t*this.$_result_coef_value).toFixed(2));var e=this.$_additional_type,s=e.value,n=e.offset,i=Object(p.b)(n)/(Object(p.b)(s)*Object(p.b)(n-s));return Number(t/i*this.$_result_coef_value)},$_is_taxes_allowed:function(){return Object(u.d)(this.$_max_win_value)},$_possible_win_label:function(){var t=this.$_is_taxes_allowed?"coupon_payout":"win_amount";return this.$_is_system?this.$T("".concat(t,"_min")):this.$T(t)},$_is_system:function(){return[r.f.COUPON_TYPES.SYSTEM,r.f.COUPON_TYPES.MULTIBET].includes(this.$_coupon_type)},$_win_value:function(){return Object.values(f.b).includes(this.$_cf_view)?this.$_max_win_value:"".concat((this.$_max_win_value-this.$_sum_value).toFixed(2)," (").concat(this.$_max_win_value,")")}})},y=s(12),g=Object(y.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"coupon-grid__cell grid__cell grid__cell--span-12",class:t.$_root_classes},[s("div",{staticClass:"grid coupon-grid coupon-grid--full-width u-npv",class:t.grid_classes},[s("div",{staticClass:"grid__inner"},[s("div",{staticClass:"coupon-grid__cell grid__cell grid__cell--span-12"},[s("div",{staticClass:"coupon-grid__row"},[s("span",{staticClass:"coupon__text"},[t._v(t._s(t.$_possible_win_label))]),t._v(" "),s("span",{staticClass:"coupon__text u-fw-500 u-mla"},[t._v(t._s(t._f("formatNumber")(t.$_win_value))+" "+t._s(t.$_current_currency_code))])])]),t._v(" "),t.$_is_taxes_allowed?s("taxes-info",{attrs:{win_value:t.$_max_win_value,sum:t.$_sum_value,sum_with_taxes:t.$_stake_with_taxes,grid_classes:t.grid_classes,is_system:t.$_is_system}}):t._e()],1)])])}),[],!1,null,null,null);e.a=g.exports},1532:function(t,e,s){"use strict";var n=s(1102),i=s(28),o=s(1056),c=s(123);e.a={data:function(){return{is_sale_loading:!1}},methods:{saleCouponWrapper:function(){this.is_sale_loading||(this.is_sale_loading=!0,this.saleCoupon())},requestSaleCoupon:function(t){var e=this,s=this.$store.getters[c.e+"accountActiveAccount"].iso,_=t||{},a={id:this.id||this.coupon_id,sum_sale:this.coupon.saleInfo.MaxSaleSum};return _.betGUID&&(a.betGUID=_.betGUID),this.$http.post("/datalinelive/salecoupon",a).then((function(t){var c=t.data,a=Object(n.d)(c);return a?(a===o.f?(e.setCouponSaleInfo({id:e.id,sale_info:Object(n.a)(c.Value)}),Object(i.e)(c.Error,"".concat(e.$T("sale_coupon_price")," ").concat(c.Value.MaxSaleSum,"?"),{onClose:function(){e.is_sale_loading=!1}}).then((function(t){t.value&&(e.is_sale_loading=!0,e.saleCoupon())}))):a===o.h?(_.betGUID=c.Value.betGUID,setTimeout((function(){e.saleCoupon(_)}),c.Value.waitTime)):a===o.g&&Object(i.f)("".concat(e.$T("coupon_was_sale")," ").concat(c.Value.MaxSaleSum," ").concat(s)),{status:a}):(Object(i.c)(c.Error),e.is_sale_loading=!1,{status:!1})})).catch((function(t){Object(i.c)(e.$T("common_error")),e.is_sale_loading=!1,console.error(t)}))}}}},1533:function(t,e,s){},1965:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var n=s(14),i=s(4),o=!n.a.isRefId(i.wb)},2007:function(t,e,s){"use strict";var n=s(23),i=s(1056),o=s(1311),c=s(1532),_=s(1965),a=s(1312),r=s(28),l=s(4),u=s(33),d=s(1513),p={name:"TaxesInfo",extends:s(2070).default},f=s(12),h={name:"WinInfo",components:{TaxesInfo:Object(f.a)(p,(function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v(this._s(this._f("toFixedFloat")(this.$_possible_win_amount_after_taxes))+" "+this._s(this.$_current_currency_code))])}),[],!1,null,null,null).exports},extends:d.a,props:{couponStatus:{type:Number,required:!0},couponType:{type:Number,required:!0},possibleWin:{type:Number,required:!0},currencyCode:{type:String,default:""}},computed:{$_coupon_type:function(){return this.couponType},textForStatus:function(){return this.$_is_taxes_allowed?this.$_is_system?this.$T("win_amount_min_include_tax"):this.$T("win_amount_include_tax"):4===this.couponStatus?this.$T("office_history_info_win"):this.$T("office_history_info_potential_sum")}}},v=Object(f.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"events__text"},[t._v("\n        "+t._s(t.textForStatus)+"\n    ")]),t._v(" "),s("div",{staticClass:"coupon__text events__text_main"},[t.$_is_taxes_allowed?s("TaxesInfo",{attrs:{win_value:t.$_max_win_value,sum:t.$_sum_value,sum_with_taxes:t.$_stake_with_taxes,is_system:t.$_is_system}}):[t._v("\n            "+t._s(t.possibleWin)+" "+t._s(t.currencyCode)+"\n        ")]],2)])}),[],!1,null,null,null).exports,b=s(8),m=s(85),y=s(424),g=s(14),$={components:{SportIcon:y.a},mixins:[m.a,o.a],props:{bet:{type:Object,required:!0},searchQuery:{type:String,required:!1}},computed:{isShowLogo:function(){return!g.a.isRefId([l.M,l.w,l.cb,l.db])},parsedBetScore:function(){try{return JSON.parse(this.bet.score).Result}catch(t){return this.bet.score}},isSimpleScoreString:function(){return this.bet.score===this.parsedBetScore}}},C={components:{Bet:Object(f.a)($,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"events__item events__item_col events__item_inside",class:t.getClassCoupon(t.bet.status)},[s("div",{staticClass:"history-title"},[s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text"},[s("span",{staticClass:"sport-ico"},[s("sport-icon",{attrs:{sport_id:t.bet.sport_id}})],1),t._v(" "),s("span",[s("b",[s("span",{class:{"u-highlight":t.hasCoincidence(t.bet.sport_name)}},[t._v("\n                            "+t._s(t.bet.sport_name)+"\n                        ")])]),t._v(" "),s("span",{class:{"u-highlight":t.hasCoincidence(t.bet.champ_name)}},[t._v("\n                        "+t._s(t.bet.champ_name)+"\n                    ")])])])]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text events__text_bold events__text_logo"},[t.isShowLogo?s("svg",{staticClass:"events__logo events__logo_center"},[s("use",{attrs:{"xlink:href":"/default/img/bet-history-icons.svg#logo"}})]):t._e(),t._v(" "),s("span",{class:{"u-highlight":t.hasCoincidence(t.bet.opp_name)}},[t._v("\n                    "+t._s(t.bet.opp_name)+"\n                ")])]),t._v(" "),t.isSimpleScoreString?s("div",{staticClass:"events__count events__text_count"},[t._v("\n                "+t._s(t.bet.score)+"\n            ")]):s("div",{staticClass:"events__count events__text_count events__count--column"},t._l(t.parsedBetScore,(function(e,n){return s("div",{key:n,staticClass:"events__information"},[t._v("\n                    "+t._s(e.P)+"\n                ")])})),0)])]),t._v(" "),s("div",{staticClass:"history-wrap"},[s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text events__text--event"},[t._v("\n                "+t._s(t.T("office_history_event"))+"\n            ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[s("span",{class:{"u-highlight":t.hasCoincidence(t.bet.event_type)}},[t._v("\n                    "+t._s(t.bet.event_type)+"\n                ")])])]),t._v(" "),t.bet.coef?s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text"},[t._v("\n                "+t._s(t.T("office_history_coef"))+"\n            ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                "+t._s(t.bet.coef)+"\n            ")])]):t._e(),t._v(" "),s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text"},[t._v("\n                "+t._s(t.T("office_history_status"))+"\n            ")]),t._v(" "),s("div",{staticClass:"events__text events__text_bold events__text_status",class:t.getClassCoupon(t.bet.status)},[t._v("\n                "+t._s(t.bet.current_state)+"\n            ")])]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text"},[t._v("\n                "+t._s(t.$T("office_history_game_start_date"))+"\n            ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                "+t._s(t.bet.date_start)+"\n            ")])]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text"},[t._v("\n                "+t._s(t.T("office_history_game_state"))+"\n            ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                "+t._s(t.bet.game_status)+"\n            ")])]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text"},[t._v("\n                "+t._s(t.T("office_history_calculated_date"))+"\n            ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                "+t._s(t.bet.calculated_date)+"\n            ")])])])])}),[],!1,null,null,null).exports,WinInfo:v},mixins:[o.a,c.a],constants:{bets_statuses:n.a,coupon_types:n.f.COUPON_TYPES,is_visible_delete:_.a,kz_express_coef_threshold:n.j,kz_express_amount_threshold:n.i},props:{coupon:{type:Object},coupon_id:{type:Number},currency_code:{type:String},searchQuery:{type:String}},data:function(){return{is_visible_bets:!1,first_bet:{}}},computed:{couponStatus:function(){return this.coupon.coupon_status?this.coupon.coupon_status.message:""},showCashback:function(){return!(!(b.a.config.isGroupId(u.d)&&this.coupon.bet>=this.$consts.kz_express_amount_threshold&&this.coupon.coef>this.$consts.kz_express_coef_threshold&&0!==this.coupon.idSport&&this.coupon.type_id===this.$consts.coupon_types.EXPRESS&&this.coupon.status===this.$consts.bets_statuses.STATUS_LOSE)||this.coupon.is_promo||this.$store.state.account.active_account.id!==this.$store.state.account.main_account.id)},cashbackSum:function(){var t=this.coupon.bets.length,e=0,s=0;switch(!0){case t<4:e=3;break;case t<6:e=4;break;case t<11:e=10;break;case t>10:e=30}return this.coupon.sum_cut&&(s=this.coupon.sum_cut),((this.coupon.bet-s)/100*e).toFixed(0)},$_is_sale_allowed:function(){return this.coupon.saleInfo&&this.coupon.is_can_sale},firstBetScore:function(){try{return JSON.parse(this.first_bet.score).Result}catch(t){return this.first_bet.score}}},watch:{coupon:{handler:function(t){t&&t.bets&&(this.first_bet=t.bets[0]),this.is_visible_bets=t.is_filtered_by_bets},immediate:!0}},methods:{setCouponSaleInfo:function(t){this.$set(this.coupon,"saleInfo",t.sale_info)},saleCouponConfirmation:function(){var t=this,e="".concat(this.coupon.saleInfo.MaxSaleSum," ").concat(this.currency_code);Object(r.e)(this.$T("coupon_sale_confirmation",[this.coupon_id,e])).then((function(e){e.value&&t.saleCouponWrapper()}))},saleCoupon:function(t){var e=this;this.requestSaleCoupon(t).then((function(t){var s=t.status;s?(s===i.g&&e.$store.commit(a.c+"historySetNeedUpdateData"),e.is_sale_loading=!1):e.$store.commit(a.c+"historySetNeedUpdateData")})).catch((function(t){console.error(t)}))},isShowLogo:function(){return!b.a.config.isRefId([l.M,l.w,l.cb,l.db])}}},T={components:{Coupon:Object(f.a)(C,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.is_visible?s("div",[s("div",{staticClass:"events__item events__item_head events__item_coupon",class:[{active:t.is_visible_bets},t.getClassCoupon(t.coupon.status)],on:{click:function(e){t.is_visible_bets=!t.is_visible_bets}}},[s("div",{staticClass:"events__cell"},[s("div",{staticClass:"history__cell"},[s("div",{staticClass:"history__title"},[t.isShowLogo()?s("svg",{staticClass:"events__logo"},[s("use",{attrs:{"xlink:href":"/default/img/bet-history-icons.svg#logo"}})]):t._e(),t._v(" "),s("div",{staticClass:"events__cell events__cell_row"},[s("div",{staticClass:"events__text"},[t.coupon.bets?s("div",{staticClass:"events__amount"},[t._v("\n                                "+t._s(t.coupon.bets.length)+"\n                            ")]):t._e(),t._v(" "),s("span",{class:{"u-highlight":t.hasCoincidence(t.first_bet.champ_name)}},[t._v("\n                                "+t._s(t.first_bet.champ_name)+"\n                            ")])]),t._v(" "),t.coupon.coef?s("div",{staticClass:"coef__item coef__num",class:t.getClassCoupon(t.coupon.status)},[t._v("\n                            "+t._s(t.coupon.coef||"")+"\n                        ")]):t._e()]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row events__cell_title"},[s("div",{staticClass:"events__text events__text_bold"},[s("span",{class:{"u-highlight":t.hasCoincidence(t.first_bet.opp_name)}},[t._v("\n                                "+t._s(t.first_bet.opp_name)+"\n                            ")])]),t._v(" "),s("div",{staticClass:"events__text events__text_count"},[t.firstBetScore!==t.first_bet.score?t._l(t.firstBetScore,(function(e,n){return s("div",{key:n},[t._v("\n                                    "+t._s(e.P)+"\n                                ")])})):[t._v("\n                                "+t._s(t.first_bet.score)+"\n                            ")]],2)])]),t._v(" "),1!==t.coupon.status&&t.$consts.is_visible_delete?s("button",{staticClass:"events__delete",on:{click:function(e){return e.stopPropagation(),t.deleteCoupon()}}}):t._e()]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row events__cell_indent"},[s("div",{staticClass:"events__text"},[t._v("\n                    "+t._s(t.$T("office_history_bet_type"))+"\n                ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                    "+t._s(t.coupon.visible_type)+"\n                ")])]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row events__cell_indent"},[s("div",{staticClass:"events__text"},[t._v("\n                    "+t._s(t.$T("office_history_coupon_status"))+"\n                ")]),t._v(" "),s("div",{staticClass:"events__text events__text_bold events__text_status",class:t.getClassCoupon(t.coupon.status)},[t._v("\n                    "+t._s(t.couponStatus)+"\n                ")])]),t._v(" "),s("div",{staticClass:"events__cell events__cell_row events__cell_indent"},[s("div",{staticClass:"events__text"},[t._v("\n                    "+t._s(t.coupon.is_promo?t.$T("office_is_promo_bet"):t.$T("office_history_bet"))+"\n                ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                    "+t._s(t.coupon.visible_bet)+" "+t._s(t.currency_code)+"\n                ")])]),t._v(" "),2!==t.coupon.status&&t.coupon.potential_win?s("WinInfo",{staticClass:"events__cell events__cell_row events__cell_indent",attrs:{couponStatus:t.coupon.status,sum:t.coupon.visible_bet,result_coef:t.coupon.coef,couponType:t.coupon.type_id,currencyCode:t.currency_code,possibleWin:t.coupon.potential_win}}):t._e(),t._v(" "),t.coupon.summ_repayment?s("div",{staticClass:"events__cell events__cell_row events__cell_indent"},[s("div",{staticClass:"events__text"},[t._v("\n                    "+t._s(t.$T("office_repayment"))+"\n                ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                    "+t._s(t.coupon.summ_repayment)+" "+t._s(t.currency_code)+"\n                ")])]):t._e(),t._v(" "),t.coupon.summ_prepayment_close?s("div",{staticClass:"events__cell events__cell_row events__cell_indent"},[s("div",{staticClass:"events__text"},[t._v("\n                    "+t._s(t.$T("office_repayment_off"))+"\n                ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                    "+t._s(t.coupon.summ_prepayment_close)+" "+t._s(t.currency_code)+"\n                ")])]):t._e(),t._v(" "),s("div",{staticClass:"events__cell events__cell_row events__cell_indent"},[s("div",{staticClass:"events__text"},[t._v("\n                    "+t._s(t.$T("office_history_coupon_date"))+" "+t._s(t.coupon.date)+"\n                ")]),t._v(" "),s("div",{staticClass:"events__text events__text_bold"},[t._v("\n                    №"),s("span",{class:{"u-highlight":t.hasCoincidence(t.coupon_id)}},[t._v("\n                        "+t._s(t.coupon_id)+"\n                    ")])])]),t._v(" "),t.showCashback?s("div",{staticClass:"events__cell events__cell_row events__cell--cashback events__cell_indent"},[s("router-link",{staticClass:"events__text events__text--cashback",attrs:{to:"/promotions/cashback/"}},[t._v("\n                    "+t._s(t.$T("office_history_cashback"))+"\n                ")]),t._v(" "),s("div",{staticClass:"events__text events__text_main"},[t._v("\n                    "+t._s(t.cashbackSum)+" "+t._s(t.currency_code)+"\n                ")])],1):t._e()],1)]),t._v(" "),t.is_visible_bets?s("div",[Object.keys(t.coupon.blocks).length?t._l(t.coupon.blocks,(function(e,n){return s("div",{key:n,staticClass:"events__item events__item_col"},[s("div",{staticClass:"events__cell events__cell_row events__cell_group",class:t.getClassCoupon(t.coupon.status)},[s("div",{staticClass:"events__text events__text_bold events__subtitle"},[n?[t._v("\n                            "+t._s(t.$T("office_history_block"))+" "+t._s(n)+"\n                        ")]:[t._v("\n                            "+t._s(t.$T("office_history_block_lobby"))+"\n                        ")]],2),t._v(" "),t.coupon.type_id===t.$options.constants.coupon_types.CONDITIONAL?s("div",{staticClass:"events__text events__text_bold"},[t._v("\n                        "+t._s(t.$T("office_history_bet"))+": "+t._s(e.sum||t.$T("office_history_max_bet"))+" "+t._s(t.currency_code)+"\n                    ")]):t._e()]),t._v(" "),t._l(e.bets,(function(e,n){return s("Bet",{key:n,attrs:{bet:t.coupon.bets.find((function(t){return t.index===e})),searchQuery:t.searchQuery}})}))],2)})):t._l(t.coupon.bets,(function(e,n){return s("Bet",{key:n,attrs:{bet:e,searchQuery:t.searchQuery}})})),t._v(" "),t.$_is_sale_allowed?s("div",{staticClass:"events__actions"},[s("div",{staticClass:"events__button events__button_sell",on:{click:function(e){return t.saleCouponConfirmation()}}},[s("preloader",{attrs:{local_show:t.is_sale_loading}}),t._v(" "),s("svg",{staticClass:"events__button-ico"},[s("use",{attrs:{"xlink:href":"/default/img/bet-history-icons.svg#sell"}})]),t._v("\n                "+t._s(t.$T("sale_coupon_price"))+" "+t._s(t.coupon.saleInfo.MaxSaleSum)+"\n            ")],1)]):t._e()],2):t._e()]):t._e()}),[],!1,null,null,null).exports},props:{coupon_list:{type:Array},coupon_info:{type:Object},currency_code:{type:String},searchQuery:{type:String}},data:function(){return{info:null,coupons:[]}}},x=Object(f.a)(T,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.coupon_list,(function(e){return s("Coupon",{key:e.id,attrs:{coupon_id:e.id,coupon:e,currency_code:t.currency_code,searchQuery:t.searchQuery}})})),1)}),[],!1,null,null,null);e.a=x.exports},2070:function(t,e,s){"use strict";s.r(e);var n=s(990),i=s(1186),o={name:"TaxesInfo",mixins:[n.a],constants:{payout_tax_percent:i.f,stake_tax_percent:i.h},props:{win_value:{type:Number,required:!0},sum:{type:Number,default:0},sum_with_taxes:{type:Number,default:0},grid_classes:{type:[String,Array],default:""},is_system:{type:Boolean,default:!1}},computed:{$_possible_win_label:function(){return this.is_system?this.$T("win_amount_min"):this.$T("win_amount")},$_taxes_amount:function(){return Object(i.b)(this.win_value,this.sum)},$_vat_amount:function(){return Object(i.c)(this.sum,this.sum_with_taxes)},$_possible_win_amount_after_taxes:function(){return Object(i.g)(this.win_value,this.$_taxes_amount)}}},c=s(12),_=Object(c.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"coupon-grid__cell grid__cell grid__cell--span-12"},[s("div",{staticClass:"grid coupon-grid coupon-grid--full-width u-npv",class:t.grid_classes},[s("div",{staticClass:"grid__inner"},[s("div",{staticClass:"coupon-grid__cell grid__cell grid__cell--span-12"},[t.$consts.stake_tax_percent?s("div",{staticClass:"coupon-grid__row"},[s("span",{staticClass:"coupon__text"},[t._v(t._s(t.$T("coupon_stake_after_tax")))]),t._v(" "),s("span",{staticClass:"coupon__text u-fw-500 u-mla"},[t._v(t._s(t._f("toFixedFloat")(t.sum_with_taxes))+" "+t._s(t.$_current_currency_code))])]):t._e()]),t._v(" "),s("div",{staticClass:"coupon-grid__cell grid__cell grid__cell--span-12"},[s("div",{staticClass:"coupon-grid__row"},[s("span",{staticClass:"coupon__text"},[t._v(t._s(t.$T("coupon_withholding_tax"))+" "+t._s(t.$consts.payout_tax_percent)+"%")]),t._v(" "),s("span",{staticClass:"coupon__text u-fw-500 u-mla"},[t._v(t._s(t._f("toFixedFloat")(t.$_taxes_amount))+" "+t._s(t.$_current_currency_code))])])]),t._v(" "),t.$_vat_amount?s("div",{staticClass:"coupon-grid__cell grid__cell grid__cell--span-12"},[s("div",{staticClass:"coupon-grid__row"},[s("span",{staticClass:"coupon__text"},[t._v(t._s(t.$T("coupon_vat_amount"))+" "+t._s(t.$consts.stake_tax_percent)+"%")]),t._v(" "),s("span",{staticClass:"coupon__text u-fw-500 u-mla"},[t._v(t._s(t._f("toFixedFloat")(t.$_vat_amount))+" "+t._s(t.$_current_currency_code))])])]):t._e(),t._v(" "),s("div",{staticClass:"coupon-grid__cell grid__cell grid__cell--span-12"},[s("div",{staticClass:"coupon-grid__row"},[s("span",{staticClass:"coupon__text"},[t._v(t._s(t.$_possible_win_label))]),t._v(" "),s("span",{staticClass:"coupon__text u-fw-500 u-mla"},[t._v(t._s(t._f("toFixedFloat")(t.$_possible_win_amount_after_taxes))+" "+t._s(t.$_current_currency_code))])])])])])])}),[],!1,null,null,null);e.default=_.exports},2126:function(t,e,s){"use strict";var n=s(1533);s.n(n).a},2632:function(t,e,s){"use strict";s.r(e);var n=s(132),i=s.n(n),o=s(2007),c={name:"SearchField",props:{value:{type:String,default:""},placeholder:{type:String,default:""}},computed:{$_value:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},mounted:function(){this.$refs.input.focus()}},_=s(12),a=Object(_.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header__search"},[s("div",{staticClass:"search-con"},[s("div",{staticClass:"input-wrap"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$_value,expression:"$_value"}],ref:"input",staticClass:"theme-default",attrs:{id:"search-input",placeholder:t.placeholder,type:"text"},domProps:{value:t.$_value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("search")},input:function(e){e.target.composing||(t.$_value=e.target.value)}}}),t._v(" "),t.$_value?s("div",{staticClass:"search-con__link",on:{click:function(e){return t.$emit("cancel")}}}):t._e()]),t._v(" "),s("label",{staticClass:"btn btn_blue btn_no-text",attrs:{for:"search-input"},on:{click:function(e){return t.$emit("search")}}},[s("i",{staticClass:"fa fa-search"})])])])}),[],!1,null,null,null).exports,r=s(1069),l=s(59),u=s(28),d=s(123),p=s(1068),f=s(35),h=s(1312),v=s(14),b=s(4),m={props:{is_toto:{type:Boolean}},constants:{NAMES_RUS_TYPES_MAIN_FILTER:{line:"Линия",live:"Live",calculated:"Рассчитано",not_calculated:"Не рассчитано",not_calculated_all:"Не рассчитано (весь период)"},NAMES_RUS_TYPES_BET_FILTER:{all:"Все",single:"Одиночная",express:"Экспресс",anti_express:"Антиэкспресс",system:"Система",chain:"Цепочка",multi_bet:"Мультиставка",conditional:"Условная ставка",lucky:"Удача",patent:"Патент"},NAMES_RUS_TYPES_SORT_FILTER:{bet_time:"Времени ставки",bet_event:"Событию ставки",bet_sum:"Сумме ставки",bet_coef:"Коэффициентам"}},data:function(){return{selected_sort:["bet_time"],selected_main_filters:[],selected_bet_types:["all"],calcTime:!1}},computed:{$_main_filter_types:function(){if(!this.is_toto)return h.d;var t={};return Object.keys(h.d).forEach((function(e){"not_calculated"===e&&(t[e]=h.d[e])})),t},$_bet_filter_types:function(){var t;return t=v.a.ref_id===b.wb?{all:this.$T("office_history_all"),single:this.$T("single_type"),express:this.$T("express"),system:this.$T("system"),chain:this.$T("chain"),multi_bet:this.$T("multiBet"),conditional:this.$T("conditionalBet"),lucky:this.$T("lucky"),patent:this.$T("patent")}:{all:this.$T("office_history_all"),single:this.$T("single_type"),express:this.$T("express"),system:this.$T("system"),chain:this.$T("chain"),multi_bet:this.$T("multiBet"),conditional:this.$T("conditionalBet"),anti_express:this.$T("antiExpress"),lucky:this.$T("lucky"),patent:this.$T("patent")},this.is_toto?{}:t},$_sort_types:function(){var t={bet_time:this.$T("office_history_bet_time"),bet_event:this.$T("office_history_bet_type_filter"),bet_sum:this.$T("office_history_bet_sum_filter"),bet_coef:this.$T("office_history_bet_coef_filter")};if(!this.is_toto)return t;var e={};return Object.keys(t).forEach((function(s){"bet_time"!==s&&"bet_sum"!==s||(e[s]=t[s])})),e}},watch:{selected_bet_types:function(t){var e=this;0!==t.length&&t.length!==Object.keys(this.$_bet_filter_types).length-1?t.length>1&&t.includes("all")&&(this.selected_bet_types=t.slice().filter((function(t){return"all"!==t}))):this.$nextTick((function(){return e.selected_bet_types=["all"]}))}},beforeMount:function(){this.selected_sort=this.$store.getters[h.c+"history_selected_sort"],this.selected_main_filters=this.$store.getters[h.c+"history_selected_main_filters"],this.selected_bet_types=this.$store.getters[h.c+"history_selected_bet_types"],this.calcTime=this.$store.getters[h.c+"historyCalcTime"]},methods:{apply:function(){this.$store.commit(h.c+"historySetSelectedSort",this.selected_sort),this.$store.commit(h.c+"historySetSelectedMainFilters",this.selected_main_filters),this.$store.commit(h.c+"historySetSelectedBetTypes",this.selected_bet_types),this.$store.commit(h.c+"historySetCalcTime",this.calcTime),this.$emit("close")},changeSortType:function(t){this.selected_sort=[t],this.$analytics.historyBets.clickOnFilterItemCheckbox(this.$consts.NAMES_RUS_TYPES_SORT_FILTER[t])},changeBetType:function(t){"all"===t&&(this.selected_bet_types=[t]),this.$analytics.historyBets.clickOnFilterItemCheckbox(this.$consts.NAMES_RUS_TYPES_BET_FILTER[t])},clickOnFilterItemCheckbox:function(t){this.$analytics.historyBets.clickOnFilterItemCheckbox(this.$consts.NAMES_RUS_TYPES_MAIN_FILTER[t])},clickOnCalcTime:function(){this.$analytics.historyBets.clickOnFilterItemCheckbox("По времени расчета")}}},y=Object(_.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"filter-popup"},[s("div",{staticClass:"filter-popup__header"},[s("div",{staticClass:"filter-popup__title"},[t._v("\n            "+t._s(t.$T("office_history_filter"))+"\n        ")]),t._v(" "),s("span",{staticClass:"filter-popup__close",on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),s("div",{staticClass:"filter-popup__content"},[s("div",{staticClass:"filter-popup__group"},t._l(t.$_main_filter_types,(function(e,n){return s("div",{key:n,staticClass:"filter-popup__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selected_main_filters,expression:"selected_main_filters"}],staticClass:"events-filter__input",attrs:{id:n,type:"checkbox",name:"events-filter"},domProps:{value:n,checked:Array.isArray(t.selected_main_filters)?t._i(t.selected_main_filters,n)>-1:t.selected_main_filters},on:{click:function(e){return t.clickOnFilterItemCheckbox(n)},change:function(e){var s=t.selected_main_filters,i=e.target,o=!!i.checked;if(Array.isArray(s)){var c=n,_=t._i(s,c);i.checked?_<0&&(t.selected_main_filters=s.concat([c])):_>-1&&(t.selected_main_filters=s.slice(0,_).concat(s.slice(_+1)))}else t.selected_main_filters=o}}}),t._v(" "),s("label",{staticClass:"events-filter__label",attrs:{for:n}},[t._v(t._s(e))])])})),0),t._v(" "),s("div",{staticClass:"filter-popup__group"},[s("div",{staticClass:"filter-popup__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.calcTime,expression:"calcTime"}],staticClass:"events-filter__input",attrs:{id:"calcTime",type:"checkbox",name:"events-filter"},domProps:{checked:Array.isArray(t.calcTime)?t._i(t.calcTime,null)>-1:t.calcTime},on:{click:t.clickOnCalcTime,change:function(e){var s=t.calcTime,n=e.target,i=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&(t.calcTime=s.concat([null])):o>-1&&(t.calcTime=s.slice(0,o).concat(s.slice(o+1)))}else t.calcTime=i}}}),t._v(" "),s("label",{staticClass:"events-filter__label",attrs:{for:"calcTime"}},[t._v(t._s(t.$T("calc_time")))])])]),t._v(" "),t.is_toto?t._e():s("div",{staticClass:"filter-popup__group"},t._l(t.$_bet_filter_types,(function(e,n){return s("div",{key:n,staticClass:"filter-popup__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selected_bet_types,expression:"selected_bet_types"}],staticClass:"events-filter__input",attrs:{id:n,type:"checkbox",name:"events-filter"},domProps:{value:n,checked:Array.isArray(t.selected_bet_types)?t._i(t.selected_bet_types,n)>-1:t.selected_bet_types},on:{click:function(e){return t.changeBetType(n)},change:function(e){var s=t.selected_bet_types,i=e.target,o=!!i.checked;if(Array.isArray(s)){var c=n,_=t._i(s,c);i.checked?_<0&&(t.selected_bet_types=s.concat([c])):_>-1&&(t.selected_bet_types=s.slice(0,_).concat(s.slice(_+1)))}else t.selected_bet_types=o}}}),t._v(" "),s("label",{staticClass:"events-filter__label",attrs:{for:n}},[t._v(t._s(e))])])})),0),t._v(" "),s("div",{staticClass:"filter-popup__group"},t._l(t.$_sort_types,(function(e,n){return s("div",{key:n,staticClass:"filter-popup__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selected_sort,expression:"selected_sort"}],staticClass:"events-filter__input",attrs:{id:n,disabled:t.selected_sort.includes(n),type:"checkbox",name:"events-filter"},domProps:{value:n,checked:Array.isArray(t.selected_sort)?t._i(t.selected_sort,n)>-1:t.selected_sort},on:{click:function(e){return t.changeSortType(n)},change:function(e){var s=t.selected_sort,i=e.target,o=!!i.checked;if(Array.isArray(s)){var c=n,_=t._i(s,c);i.checked?_<0&&(t.selected_sort=s.concat([c])):_>-1&&(t.selected_sort=s.slice(0,_).concat(s.slice(_+1)))}else t.selected_sort=o}}}),t._v(" "),s("label",{staticClass:"events-filter__label",attrs:{for:n}},[t._v(t._s(e))])])})),0)]),t._v(" "),s("div",{staticClass:"filter-popup__btn-wrap"},[s("div",{staticClass:"filter-popup__btn",on:{click:function(e){return t.apply()}}},[t._v("\n            "+t._s(t.$T("office_history_apply"))+"\n        ")])])])}),[],!1,null,null,null).exports,g=s(1965),$=s(0),C=s.n($),T=s(1046),x=s.n(T);function w(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function S(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?w(Object(s),!0).forEach((function(e){C()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var O={constants:{coupon_filter_fields:["id"],bet_filter_fields:["champ_name","opp_name","sport_name","event_type"],debounce_delay_in_ms:300},data:function(){return{search_query:"",coupons:[],original_coupons:[],debounced_search:this.getDebouncedSearchFn()}},watch:{original_coupons:function(){this.applySearchQuery()},search_query:function(t){t?this.debounced_search():this.cancelTextSearch()}},methods:{cancelTextSearch:function(){this.coupons=this.original_coupons,this.search_query=""},getDebouncedSearchFn:function(){var t=this;return x()((function(){return t.applySearchQuery()}),this.$consts.debounce_delay_in_ms)},applySearchQuery:function(){var t=this;this.search_query&&(this.coupons=this.original_coupons.map((function(e){return t.processCoupon(e)})).filter((function(e){return t.isCouponPassedFilter(e)})))},processCoupon:function(t){return S(S({},t),{},{is_filtered_by_bets:this.areBetsPassedFilter(t.bets||[])})},areBetsPassedFilter:function(t){var e=this;return t.some((function(t){return e.isBetPassedFilter(t)}))},isBetPassedFilter:function(t){return this.isObjectPassedFilter(this.$consts.bet_filter_fields,t)},isCouponPassedFilter:function(t){return this.isObjectPassedFilter(this.$consts.coupon_filter_fields,t)||t.is_filtered_by_bets},isObjectPassedFilter:function(t,e){var s=this;return t.some((function(t){return void 0!==e[t]&&String(e[t]).toLocaleLowerCase().includes(s.search_query.toLocaleLowerCase())}))}}},k=s(10),E=s.n(k),P={constants:{PREDICTION_STATUS_NOT_CONFIRMED:0},data:function(){return{promo_predictions_lists:[],promo_status:[]}},mounted:function(){this.getLeagueChampionsBets()},methods:{deleteBtn:function(t,e,s){var n=this;this.$http.post("/promotions/delForecastsLeagueChampions",{id:e}).then((function(e){var i=e.data.data;i.Success?E.a.set(n.promo_predictions_lists[t].predictions[s],"removed",!0):Object(u.c)(i.Error)}))},showDetails:function(t,e){E.a.set(this.promo_predictions_lists[t].predictions[e],"opened",!this.promo_predictions_lists[t].predictions[e].opened)},timeConvert:function(t){var e=new Date(1e3*t),s="".concat(this.addZero(e.getDate()),".").concat(this.addZero(e.getMonth()+1),".").concat(e.getFullYear()),n="".concat(this.addZero(e.getHours()),":").concat(this.addZero(e.getMinutes()));return"".concat(this.$T("office_history_from")," ").concat(s," (").concat(n,")")},addZero:function(t){return t<10?"0".concat(t):t},opponentsForecast:function(t,e){return e.length?e.split(":")[t]:0},getLeagueChampionsBets:function(){var t=this;this.$http.get("/office/getchampionsinfo").then((function(e){var s=e.data;s.success&&(t.promo_predictions_lists=s.promo_predictions_lists,t.promo_status=s.promo_champions_status_bets)}))}}},j=Object(_.a)(P,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",t._l(t.promo_predictions_lists,(function(e,n){return s("section",{staticClass:"events-leaugue chLeag20acc"},[s("div",{staticClass:"events-leaugue__head"},[s("span",{staticClass:"events-leaugue__title"},[t._v(t._s(e.name))]),t._v(" "),s("div",{staticClass:"events-leaugue__points"},[s("span",{staticClass:"events-leaugue__text"},[t._v(t._s(t.$T("office_history_promo_balls")))]),t._v(" "),s("span",{staticClass:"events-leaugue__num"},[t._v(t._s(e.npoints))])])]),t._v(" "),t._l(e.predictions,(function(i,o){return s("div",{staticClass:"events-leaugue__body events-leaugue__body--open"},[s("div",{staticClass:"events-leaugue__section"},[s("section",{staticClass:"events-leaugue__mob  league-mob",class:{"events-leaugue__mob--open":e.predictions[o].opened,"events-leaugue__mob--remove":e.predictions[o].removed}},[s("div",{staticClass:"league-mob__head",on:{click:function(e){return t.showDetails(n,o)}}},[s("div",{staticClass:"league-mob__info"},[s("div",{staticClass:"league-mob__block"},[s("p",{staticClass:"league-mob__text  league-mob__text--num"},[s("b",[t._v("№ "+t._s(i.ID))])]),t._v(" "),s("p",{staticClass:"league-mob__subtext",domProps:{innerHTML:t._s(t.timeConvert(i.DT))}})]),t._v(" "),s("div",{staticClass:"league-mob__block"},[s("p",{staticClass:"league-mob__subtext"},[t._v("\n                                    "+t._s(t.$T("office_history_status_promo"))+"\n                                ")]),t._v(" "),s("p",{class:"league-mob__text league-mob__text--"+t.promo_status[i.AP].class},[t._v("\n                                    "+t._s(t.promo_status[i.AP].message)+"\n                                ")])]),t._v(" "),t._m(0,!0),t._v(" "),s("div",{staticClass:"league-mob__expand"})])]),t._v(" "),i.opened?s("div",{staticClass:"league-mob__body"},[s("div",{staticClass:"league-mob__coupon"},[s("div",{staticClass:"league-mob__entry"},[s("div",{staticClass:"league-mob__table"},[s("div",{staticClass:"league-mob__row"},[s("div",{staticClass:"league-mob__in league-mob__in--left"},[s("div",{staticClass:"league-mob__name"},[t._v(t._s(i.OP1))]),t._v(" "),s("div",{staticClass:"league-mob__sc"},[t._v("\n                                                "+t._s(t.opponentsForecast(0,i.SC))+"\n                                            ")])]),t._v(" "),s("div",{staticClass:"league-mob__in league-mob__in--right"},[s("div",{staticClass:"league-mob__sc"},[t._v("\n                                                "+t._s(t.opponentsForecast(1,i.SC))+"\n                                            ")]),t._v(" "),s("div",{staticClass:"league-mob__name"},[t._v(t._s(i.OP2))])])]),t._v(" "),i.AP===t.$consts.PREDICTION_STATUS_NOT_CONFIRMED&&e.link?s("a",{staticClass:"league-mob__link",attrs:{href:e.link}},[t._v("\n                                        "+t._s(t.$T("office_history_promo_confirm"))+"\n                                    ")]):t._e(),t._v(" "),s("div",{staticClass:"league-mob__con"},[s("button",{staticClass:"league-mob__btn",on:{click:function(e){return t.deleteBtn(n,i.ID,o)}}})])])]),t._v(" "),s("div",{staticClass:"league-mob__bottom"})])]):t._e()])])])}))],2)})),0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"league-mob__block league-mob__block--centered"},[e("button",{staticClass:"league-mob__btn"})])}],!1,null,null,null).exports,B={name:"BetsHistoryApp",components:{Datepicker:r.a,MultiSelect:i.a,BettingTable:o.a,SearchField:a,PromoLeagueChampions:j,Info:function(){return s.e(854).then(s.bind(null,2775))},TotoTable:function(){return s.e(855).then(s.bind(null,2649))}},mixins:[O],constants:{is_open_toto:v.a.is_toto_allowed,is_visible_delete:g.a,pages:{BETTING:1,TOTO:2}},data:function(){return{current_tab:this.$options.constants.pages.BETTING,coupons:[],info:[],date_from:new Date,date_to:new Date,is_loading:!0,is_sale_info_loading:!0,current_account:null,is_filter_open:!1,error_message:null,accounts_loaded:!1,is_search_field_hidden:!0}},computed:{$_current_table:function(){return this.current_tab===this.$options.constants.pages.BETTING?"BettingTable":"TotoTable"},$_accounts:function(){var t=this.$store.getters[d.e+"actionGetAllAccounts"],e=[];return t.forEach((function(t){e.push({id:t.id,name:"".concat(t.iso,"(").concat(t.name,")"),currency_id:t.currency_id,iso:t.iso})})),e},$_period:function(){return"".concat(Object(l.a)(this.date_from,"dd-MM-yyyy")," - ").concat(Object(l.a)(this.date_to,"dd-MM-yyyy"))},$_current_langs:function(){var t="en",e=this.$store.getters[f.c+"globalGetLanguage"];return e in p&&(t=e),p[t]},$_is_toto:function(){return this.current_tab===this.$options.constants.pages.TOTO},$_is_search_available:function(){return!this.$_is_toto},$_need_update_data:function(){return this.$store.getters[h.c+"need_update_data"]}},watch:{$_current_table:function(){this.cancelTextSearch()},$_need_update_data:function(){this.loadBets()},date_to:function(t){t>new Date&&(this.date_to=new Date),this.loadBets()},date_from:function(){this.loadBets()},$_accounts:{handler:function(){var t=this.$store.getters[d.e+"accountActiveAccount"];this.$_accounts.length&&!this.accounts_loaded&&(this.accounts_loaded=!0,this.current_account=this.$_accounts.find((function(e){return e.id===t.id})))},immediate:!0},current_account:{handler:function(){this.loadBets()}}},beforeCreate:function(){this.$store.state[h.b]||this.$store.registerModule(h.b,h.a)},mounted:function(){this.deactivateNotCalculatedAll(),this.current_account&&this.loadBets()},beforeDestroy:function(){this.cancelTextSearch(),this.coupons=[],this.original_coupons=[],this.$store.unregisterModule(h.b)},methods:{toggleSearchFieldVisibility:function(){this.is_search_field_hidden=!this.is_search_field_hidden,this.$analytics.historyBets.clickOnSearchButton()},setMainFilters:function(){this.$store.commit(h.c+"historySetBaseFilters")},showFilter:function(){var t=this;this.is_filter_open||(this.is_filter_open=!0,this.$modal.show(y,{is_toto:this.$_is_toto},{classes:"filter-popup__modal",width:"95%"},{"before-close":function(){t.is_filter_open=!1,t.loadBets()}}))},setTab:function(t){t!==this.current_tab&&(this.current_tab=t,this.$store.commit(h.c+"historySetIsToto",this.current_tab===this.$options.constants.pages.TOTO),this.setMainFilters(),this.current_tab===this.$options.constants.pages.BETTING&&this.deactivateNotCalculatedAll(),this.coupons=[],this.original_coupons=[],this.is_search_field_hidden=!0,this.info={},this.loadBets(),2===t&&this.$analytics.historyBets.clickOnTotoTab())},deactivateNotCalculatedAll:function(){if("uncalculated"!==this.$route.params.id){var t=this.$store.getters[h.c+"history_selected_main_filters"];this.$store.commit(h.c+"historySetSelectedMainFilters",t.filter((function(t){return"not_calculated_all"!==t})))}},deleteHistory:function(){var t=this;Object(u.e)(this.$_period,this.$T("office_history_delete_by_period"),{preConfirm:function(){t.$analytics.historyBets.clickOnConfirmDeletionHistoryBetsButton(),t.$http.post("/office/historydel/",{from:Object(l.a)(t.date_from,"dd-MM-yyyy"),to:Object(l.a)(t.date_to,"dd-MM-yyyy")}).then((function(e){var s=e.data;s.success?t.loadBets():Object(u.c)(s.err)})).catch((function(t){console.error(t)}))}}),this.$analytics.historyBets.clickOnDeleteHistoryBetsButton()},loadBets:function(){var t=this;if(this.current_account){var e=this.$store.getters[h.c+"history_selected_main_filters"],s=this.$store.getters[h.c+"history_selected_sort"],n=this.$store.getters[h.c+"history_sort_type"],i=this.$store.getters[h.c+"history_bet_type"],o=this.$store.getters[h.c+"historyCalcTime"]?1:0,c={to:Object(l.a)(this.date_to,"dd-MM-yyyy"),from:Object(l.a)(this.date_from,"dd-MM-yyyy"),buyInKassa:0,fSort:n,fNot:+e.includes("not_calculated"),fEst:+e.includes("calculated"),fLive:+e.includes("live"),fLine:+e.includes("line"),uncalc:+e.includes("not_calculated_all"),fType:i,bonus:this.current_account.id,nc:+e.includes("not_calculated"),filter:+s.includes("bet_sum"),is_toto:this.$_is_toto,calcTime:o};this.is_loading=!0,this.coupons=[],this.original_coupons=[],this.info={},this.error_message=null,this.$http.post("/office/history",c).then((function(e){var s=e.data;if(s.error)return t.coupons=[],void(t.error_message=s.error);s.result&&(s.result.history&&(t.coupons=s.result.history,t.$_is_search_available&&(t.original_coupons=t.coupons)),s.result.sum_unplaced&&s.result.win_sum&&(t.info={sum_unplaced:parseFloat(parseFloat(s.result.sum_unplaced).toFixed(2)),win_sum:parseFloat(parseFloat(s.result.win_sum).toFixed(2)),currency_code:t.current_account.iso}))})).finally((function(){t.is_loading=!1,0!==t.coupons.length&&(t.is_sale_info_loading=!0,t.$http.post("/datalinelive/couponprice",{multi:!0}).then((function(e){var s=e.data;s.Success&&(s.Value||s.Value.length)&&s.Value.forEach((function(e){var s=t.coupons.findIndex((function(t){return t.id===e.BetId}));-1!==s&&t.$set(t.coupons[s],"saleInfo",e.SaleBetInfo)}))})).catch((function(t){console.error(t)})).finally((function(){t.is_sale_info_loading=!1})))}))}},setBeginningPeriod:function(){this.$analytics.historyBets.setBeginningPeriod()},setEndingPeriod:function(){this.$analytics.historyBets.setEndingPeriod()},openAccountList:function(){this.$analytics.historyBets.openAccountList()}}},I=(s(2126),Object(_.a)(B,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main__header main__header_history"},[s("div",{staticClass:"form-default form-default_filter"},[t.$_is_search_available?s("div",{staticClass:"search main-nav__link search_history",class:{"is-active":!t.is_search_field_hidden},on:{click:t.toggleSearchFieldVisibility}}):t._e(),t._v(" "),s("div",{staticClass:"filter-date"},[s("div",{staticClass:"filter-date__input-con"},[s("datepicker",{attrs:{language:t.$_current_langs,"input-class":"filter-date__input"},on:{selected:t.setBeginningPeriod},model:{value:t.date_from,callback:function(e){t.date_from=e},expression:"date_from"}})],1),t._v(" "),s("div",{staticClass:"filter-date__input-con"},[s("datepicker",{attrs:{language:t.$_current_langs,"input-class":"filter-date__input"},on:{selected:t.setEndingPeriod},model:{value:t.date_to,callback:function(e){t.date_to=e},expression:"date_to"}})],1)]),t._v(" "),s("div",{staticClass:"events__refresh",on:{click:function(e){return t.loadBets()}}})]),t._v(" "),t.$_accounts.length>1?s("div",{staticClass:"form-default form-default_history"},[s("MultiSelect",{staticClass:"office-list__multiselect",attrs:{options:t.$_accounts,searchable:!0,"hide-selected":!0,placeholder:"","select-label":"",label:"name","track-by":"id"},on:{open:t.openAccountList},model:{value:t.current_account,callback:function(e){t.current_account=e},expression:"current_account"}}),t._v(" "),t.$consts.is_visible_delete?s("div",{staticClass:"btn-delete",on:{click:function(e){return t.deleteHistory()}}}):t._e()],1):t._e(),t._v(" "),t.$_is_search_available?s("transition",{attrs:{name:"slide"}},[t.is_search_field_hidden?t._e():s("SearchField",{attrs:{placeholder:""+t.$T("office_history_tab_search_placeholder")},on:{search:function(e){return t.applySearchQuery()},cancel:function(e){return t.cancelTextSearch()}},model:{value:t.search_query,callback:function(e){t.search_query=e},expression:"search_query"}})],1):t._e(),t._v(" "),s("div",{staticClass:"tabs tabs_main tabs_theme_dark"},[s("div",{staticClass:"tabs__item"},[s("button",{staticClass:"tabs__link",class:{active:t.current_tab===t.$options.constants.pages.BETTING},on:{click:function(e){return t.setTab(t.$options.constants.pages.BETTING)}}},[s("span",{staticClass:"tabs__ico tabs__ico_pen"},[t._v(t._s(t.$T("office_history_tab_bets")))])])]),t._v(" "),t.$options.constants.is_open_toto?s("div",{staticClass:"tabs__item"},[s("button",{staticClass:"tabs__link",class:{active:t.current_tab===t.$options.constants.pages.TOTO},on:{click:function(e){return t.setTab(t.$options.constants.pages.TOTO)}}},[s("span",{staticClass:"tabs__ico tabs__ico_toto"},[t._v(t._s(t.$T("office_history_tab_toto")))])])]):t._e(),t._v(" "),s("div",{staticClass:"tabs__item tabs__item_events-filter events-filter dropdown dropdown_right"},[s("button",{staticClass:"tabs__link tabs__link_filter",on:{click:t.showFilter}},[s("span",{staticClass:"tabs__ico tabs__ico_filter"})])])]),t._v(" "),s("div",{staticClass:"main__content main__content_history"},[t.coupons.length?s("div",{staticClass:"events events_simple history"},[t.current_tab===t.$options.constants.pages.BETTING?[s("Info",{attrs:{count:t.coupons.length,period:t.$_period,win_sum:t.info.win_sum,sum_unplaced_bet:t.info.sum_unplaced,currency_code:t.current_account.iso}})]:t._e(),t._v(" "),s(t.$_current_table,{tag:"component",attrs:{coupon_list:t.coupons,searchQuery:t.search_query,currency_code:t.current_account.iso}})],2):t.error_message?s("div",{staticClass:"main__errormsg"},[t._v("\n            "+t._s(t.error_message)+"\n        ")]):s("div",{staticClass:"main__errormsg"},[t._v("\n            "+t._s(t.$T("office_history_coupon_empty_bets"))+"\n        ")]),t._v(" "),t.current_tab===t.$options.constants.pages.BETTING?[s("promo-league-champions")]:t._e(),t._v(" "),s("preloader",{attrs:{local_show:t.is_loading}})],2)],1)}),[],!1,null,"2ba2fd28",null));e.default=I.exports},990:function(t,e,s){"use strict";var n=s(35),i=s(30),o=s(123),c=s(4),_=s(8);e.a={computed:{$_bonus_account_id:function(){return this.$store.getters["coupon/"+i.f]},$_current_currency_code:function(){var t=this;if(this.$store.state[o.d]&&this.$store.getters[o.e+"accountActiveAccount"]){var e=this.$store.getters[o.e+"accountGetAccounts"].find((function(e){return t.$_bonus_account_id&&e.id===t.$_bonus_account_id}));return e?e.iso:this.$store.getters[o.e+"accountActiveAccount"].iso}if(!window.user_balance)return _.a.config.is_mobile&&window.GEO_CURRENCY?window.GEO_CURRENCY.code:_.a.config.isRefId([c.t,c.M,c.nb])?"BTC":"RUB";var s=window.user_balance.getAllCurrencyAccounts().find((function(t){return t.is_active}));return s&&!this.$_bonus_account_id?s.iso:window.user_balance.getPrimaryCurrency()},$_get_currency_postfix:function(){var t=this.$store.getters[n.d+"/globalGetUserId"],e=this.$store.state[o.d];return t&&(window.user_balance&&window.user_balance.state.accounts.length||e)?"(".concat(this.$_current_currency_code,")"):""}}}}}]);
//# sourceMappingURL=Office.history.bf80a3208834653f95b1.chunk.js.map